(()=>{"use strict";const e=function(){const e=document.querySelector("#sidebar"),n=document.createElement("div");n.id="sidebarheader",n.innerText="Projects",e.append(n);const c=document.createElement("div");c.id="project_container";let r=JSON.parse(localStorage.getItem("name"));if(r)for(let e of JSON.parse(localStorage.getItem("name"))){const t=document.querySelector("#sidebar");if("Inbox"==e){const n=document.createElement("div");n.id="inbox",n.classList.add("projects");const c=document.createElement("div");c.innerText="list",c.classList.add("material-icons");const o=document.createElement("div");o.innerText=e,o.classList.add("project-name"),n.append(c,o);const r=document.querySelector("#sidebarheader");t.insertBefore(n,r);continue}const n=document.createElement("div");n.classList.add("projects");const o=document.createElement("div");o.innerText="list",o.classList.add("material-icons");const r=document.createElement("div");r.innerText=e,r.classList.add("project-name");const i=document.createElement("div");i.innerText="remove",i.classList.add("material-icons","remove"),i.onclick=function(e){e.stopPropagation(),s(i)},n.append(o,r,i),c.append(n),t.append(c)}else{localStorage.setItem("name",JSON.stringify(["Inbox"])),localStorage.setItem("Inbox",JSON.stringify([])),r=JSON.parse(localStorage.getItem("name"));const t=document.createElement("div");t.id="inbox",t.classList.add("projects");const n=document.createElement("div");n.innerText="list",n.classList.add("material-icons");const c=document.createElement("div");c.innerText="Inbox",c.classList.add("project-name"),t.append(n,c);const o=document.querySelector("#sidebarheader");e.insertBefore(t,o)}t(r),o(),document.querySelector("#inbox").click()},t=function(e){const t=document.querySelector("#sidebar"),c=document.createElement("button");c.id="new_project",c.innerText="New project",t.append(c),c.onclick=function(){n(e)}},n=function(t){const n=document.querySelector("#sidebar"),o=document.createElement("div");o.classList.add("sidebarform");const r=document.createElement("form");r.id="side-form";const i=document.createElement("input");i.type="text",i.required=!0,i.placeholder="Project Name";const a=document.createElement("div");a.classList.add("buttons");const d=document.createElement("button");d.id="side-submit",d.innerText="Submit";const l=document.createElement("button");l.id="side-cancel",l.innerText="Cancel",a.append(d,l),l.onclick=function(){document.querySelector("#sidebar").remove();const t=document.querySelector("#container"),n=document.createElement("div");n.id="sidebar",t.insertBefore(n,t.children[0]),e()},r.append(i,a),o.append(r),n.append(o),document.querySelector("#new_project").remove(),r.onsubmit=function(e){e.preventDefault(),c(t)}},c=function(t){const n=document.querySelector("#project_container"),c=document.querySelector("#side-form"),o=function(e,t=[]){return{getName:()=>e,getTasks:()=>t}}(c[0].value);if(localStorage.setItem(o.getName(),JSON.stringify(o.getTasks())),t.includes(c[0].value))window.alert("already there");else{t.push(c[0].value),localStorage.setItem("name",JSON.stringify(t)),c.parentElement.remove(),n&&n.remove(),document.querySelector("#sidebar").remove();const o=document.querySelector("#container"),r=document.createElement("div");r.id="sidebar",o.insertBefore(r,o.children[0]),e()}},o=function(){const e=document.querySelector("#container"),t=document.querySelectorAll(".projects");for(let n of t)n.onclick=function(){document.querySelector("#main").remove();const t=document.createElement("div");t.id="main",e.append(t);const c=document.createElement("div");c.id="div_header",c.innerText=n.children[1].innerText,t.append(c),r(n.children[1].innerText)}},r=function(e){const t=document.querySelector("#main"),n=document.createElement("div");n.id="task_list",t.append(n);let c=JSON.parse(localStorage.getItem(e));if(c)for(let e of c){const t=document.createElement("div");t.classList.add("tasks");const c=document.createElement("div");c.classList.add("nc");const o=document.createElement("div");o.classList.add("d");const r=document.createElement("div");r.innerText=e.split(" ")[1];const i=document.createElement("input");i.type="checkbox",i.classList.add("checkbox");const s=document.createElement("div");s.classList.add("n");const m=document.createElement("div");m.innerText=e.split(" ")[0],i.onclick=function(){a(i)},m.onclick=function(){d(m)},r.onclick=function(){l(r)},s.append(m),c.append(i,s),o.append(r),t.append(c,o),n.append(t)}const o=document.createElement("button");o.id="new_task",o.innerText="Add Task",n.append(o),o.onclick=function(){o.remove(),i()}},i=function(){const e=document.querySelector("#task_list"),t=document.createElement("form");t.id="form";const n=document.createElement("input");n.type="text",n.required=!0;const c=document.createElement("input");c.type="date";const o=document.createElement("div");o.classList.add("task-buttons");const i=document.createElement("button");i.type="submit",i.innerText="Submit",i.id="submit";const a=document.createElement("button");a.id="cancel",a.innerText="Cancel",o.append(i,a),a.onclick=function(){e.remove(),r(document.querySelector("#div_header").innerText)},t.append(n,c,o),e.append(t),t.onsubmit=function(n){n.preventDefault();const c=document.querySelector("#div_header").innerText;let o=JSON.parse(localStorage.getItem(c)),i=!0;for(let e of o)e.split(" ")[0]==t[0].value&&(window.alert("already there"),i=!1);i&&(o||(o=[]),t[1].value?o.push(t[0].value+" "+t[1].value):o.push(t[0].value+" NoDate"),localStorage.setItem(c,JSON.stringify(o)),e.remove(),r(c))}},a=function(e){let t=JSON.parse(localStorage.getItem(document.querySelector("#div_header").innerText)),n=e.nextSibling.children[0].innerText+" "+e.parentElement.nextSibling.innerText;if(1==e.checked){let c=t.indexOf(n);t.splice(c,1),e.parentElement.parentElement.remove(),localStorage.setItem(document.querySelector("#div_header").innerText,JSON.stringify(t))}},d=function(e){let t,n=e.innerText;const c=document.createElement("input");c.type="text",e.style.display="none",e.parentElement.append(c);let o,r=JSON.parse(localStorage.getItem(document.querySelector("#div_header").innerText));for(let e of r)n==e.split(" ")[0]&&(o=r.indexOf(e),t=e.split(" ")[1]);c.onkeydown=function(i){if("Enter"==i.key&&c.value){if(c.value==n)window.alert("new name");else{let e=c.value+" "+t;r[o]=e}localStorage.setItem(document.querySelector("#div_header").innerText,JSON.stringify(r)),c.style.display="none",e.innerText=c.value,e.style.display=""}}},l=function(e){let t=e.parentElement.previousSibling.children[1].children[0].innerText,n=e.innerText;const c=document.createElement("input");c.type="date",e.parentElement.append(c),e.style.display="none";let o,r=JSON.parse(localStorage.getItem(document.querySelector("#div_header").innerText));for(let e of r)n==e.split(" ")[1]&&(o=r.indexOf(e));c.oninput=function(){let n=t+" "+c.value;r[o]=n,localStorage.setItem(document.querySelector("#div_header").innerText,JSON.stringify(r)),c.style.display="none",e.innerText=c.value,e.style.display=""}},s=function(t){const n=t.previousSibling.innerText;localStorage.removeItem(n);let c=JSON.parse(localStorage.getItem("name")),o=c.indexOf(n);c.splice(o,1),localStorage.setItem("name",JSON.stringify(c)),document.querySelector("#project_container"),document.querySelector("#new_project"),document.querySelectorAll(".projects"),document.querySelector("#sidebar").remove();const r=document.createElement("div"),i=document.querySelector("#container");r.id="sidebar",i.insertBefore(r,i.children[0]),e()};e()})();